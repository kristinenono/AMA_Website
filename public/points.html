<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Single Page Layout</title>
    <link rel="stylesheet" href="style.css" />
    <script
      src="https://kit.fontawesome.com/bcae03608a.js"
      crossorigin="anonymous"
    ></script>
    <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css"
  />
  </head>
  <body>
    <header>
        <div class="navbar-menu">
          <div>
            <a href="index.html" id="home-link"><strong id="home-nav">HOME</strong></a>
            <a id="format-link1"><strong id="format-nav">ABOUT</strong></a>
            <div class="dropdown">
              <button class="bttn1"><strong id="format-nav">MEMBERS</strong></button>
              <div class="dropdown-content">
                <a href="calendar.html" id="calendarbtn">CALENDAR</a>
                <a href="points.html" id="pointbtn">POINT SYSTEM</a>
              </div>
            </div>          
            <a href="blog.html" id="blog-link"><strong id="format-nav">BLOG</strong></a>
            <a id="format-link"><strong id="format-nav">CONTACT</strong></a>
            <!-- hiding the modal burger since its interfering with the index page -->
          <!-- <div class="login-signup-burger">
            <a id="login">
              <button id="logbtn" class="add-btn button">
                <strong id="bttn-font">LOGIN</strong>
              </button>
            </a>
            &nbsp; &nbsp;
            <a id="signin">
              <button id="signbtn" class="add-btn button">
                <strong id="bttn-font">SIGN UP</strong>
              </button>
            </a>
          </div> -->
        </div>
        </div>
      </nav>
    </header>
    <main>  
        <div class="filter-container">
            <label for="nameSearch">Search by Name:</label>
            <input type="text" id="nameSearch" placeholder="Search name...">
            <label for="semesterFilter">Filter by Semester:</label>
            <select id="semesterFilter">
                <option value="">All</option>
                <option value="Fall 2023">Fall 2023</option>
                <option value="Spring 2024">Spring 2024</option>
                <option value="Fall 2024">Fall 2024</option>
                <option value="Spring 2025">Spring 2025</option>
                <!-- Add more options as needed -->
            </select>
            <!-- <label for="eventFilter">Filter by Event:</label>
            <select id="eventFilter">
                <option data-event="Total Points">All</option>
                <option data-event="Philanthropy Points">Philanthropy Points</option>
                <option data-event="Developement Points">Developement Points</option>
                <option data-event="Social Points">Social Points</option>
                <option data-event="Speaker Points">Speaker Points</option>
            </select> -->
            <button id="applyFilters" class="redbtn pointbtn">Apply Filters</button>
            <button id="editbtn" class="bluebtn pointbtn">Edit Points</button>
        </div>   
        <div id="savecancelbtn" class="container editsavecancel is-hidden">
          <button id="editsave" class="bluebtn pointbtn">Save</button>
          <button id="editcancel" class="redbtn pointbtn">Cancel</button>
        </div>              
        <table class="table is-bordered is-striped is-hoverable">
            <thead>
                <tr class="has-text-white">
                    <th>Member</th>
                    <th>Semester</th>
                    <th>Philanthropy Points</th>
                    <th>Developement Points</th>
                    <th>Social Points</th>
                    <th>Speaker Points</th>
                    <th>Total Points</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>John Doe</td>
                    <td>Spring 2024</td>
                    <td>3</td>
                    <td>1</td>
                    <td>2</td>
                    <td>1</td>
                    <td></td>
                </tr>
                <tr>
                    <td>Jane Smith</td>
                    <td>Spring 2024</td>
                    <td>2</td>
                    <td>1</td>
                    <td>2</td>
                    <td>1</td>
                    <td></td>
                </tr>
                <tr>
                    <td>Michael Johnson</td>
                    <td>Spring 2025</td>
                    <td>1</td>
                    <td>1</td>
                    <td>2</td>
                    <td>1</td>
                    <td></td>
                </tr>
                <tr>
                    <td>Emma Lee</td>
                    <td>Spring 2024</td>
                    <td>3</td>
                    <td>12</td>
                    <td>2</td>
                    <td>1</td>
                    <td></td>
                </tr>
                <tr>
                    <td>Emma Lee</td>
                    <td>Fall 2024</td>
                    <td>3</td>
                    <td>3</td>
                    <td>2</td>
                    <td>1</td>
                    <td></td>
                </tr>
                <tr>
                    <td>X</td>
                    <td>Fall 2023</td>
                    <td>3</td>
                    <td>1</td>
                    <td>2</td>
                    <td>1</td>
                    <td></td>
                </tr>
                <tr>
                    <td>X</td>
                    <td>Spring 2024</td>
                    <td>3</td>
                    <td>1</td>
                    <td>2</td>
                    <td>2</td>
                    <td></td>
                </tr>
                <tr>
                    <td>X</td>
                    <td>Spring 2024</td>
                    <td>3</td>
                    <td>1</td>
                    <td>2</td>
                    <td>1</td>
                    <td></td>
                </tr>
                <tr>
                    <td>X</td>
                    <td>Spring 2024</td>
                    <td>3</td>
                    <td>1</td>
                    <td>2</td>
                    <td>0</td>
                    <td></td>
                </tr>
                <tr>
                    <td>X</td>
                    <td>Spring 2024</td>
                    <td>3</td>
                    <td>1</td>
                    <td>2</td>
                    <td>1</td>
                    <td></td>
                </tr>
                <tr>
                    <td>X</td>
                    <td>Fall 2024</td>
                    <td>3</td>
                    <td>2</td>
                    <td>2</td>
                    <td>1</td>
                    <td></td>
                </tr>
                <tr>
                    <td>X</td>
                    <td>Fall 2024</td>
                    <td>3</td>
                    <td>4</td>
                    <td>2</td>
                    <td>1</td>
                    <td></td>
                </tr>
            </tbody>
        </table>
    </main>
    <footer>
        <div class="footer-box">
          <div class="footer-section">
            <div class="navbar-items">
              <img src="images/AMA_Logo_Footer.png" alt="" id="img_logo">
              <div id="uw-wisc">
                <strong id="footer-uw-logo" class="text-logo">University of Wisconsin </br> Madison</strong>
              </div>
            </div>
            <div class="social-icons" id="icons">
                <a href="https://www.linkedin.com/in/ama-badgers-5247a9252/" id="social-icon">
                  <i class="fab fa-linkedin fa-2x"></i>
                </a>
                <a href="https://www.instagram.com/amabadgers/" id="social-icon">
                  <i class="fab fa-instagram fa-2x"></i>
                </a>
                <a href="https://www.facebook.com/AMAUWMadison/" id="social-icon">
                  <i class="fab fa-facebook fa-2x"></i>
                </a>
                <a href="https://twitter.com/amauwmadison?lang=en">
                  <i class="fab fa-twitter fa-2x"></i>
                </a>
            </div>
            <div id="adress">
              <p>975 University Ave, Madison, WI 53706</p>
              <p id="phone">+00 000 000 000</p>
            </div>
          </div>
          <div class="footer-section" id="footer-link-padding">
            <div>
              <div id="footer-padding">
                <a href="#" ><b>About Us</b></a>
              </div>
              <div id="footer-padding">
                <a href="#"><b>Blog</b></a>
              </div>
              <div id="footer-padding">
                <a href="#"><b>Point System</b></a>
              </div>
              <div id="footer-padding">
                <a href="#"><b>Contact Us</b></a>
              </div>
              <div id="footer-padding">
                <a href="calendar.html"><b>Events</b></a>
              </div>
              <div id="footer-padding">
                <a href="#"><b>Become a Sponsor</b></a>
              </div>
            </div>
          </div>
          <div id="line"></div>
          <div class="footer-section">
            <h2>JOIN OUR EMAIL LIST</h2>
            <p>Want to become an official member of the Badger American Marketing Association or just be added to the email list? Fill out our member form to stay up to date on upcoming events!</p>
            <input type="text" placeholder="Enter your email here">
            <button id="submit_btn">
              <p>SUBMIT</p>
            </button>
          </div>
        </div>
      </footer>
    <!-- <script src="app.js"></script> -->
    <script> //Still working on this, I'll move it to app.js when I'm done!
    // Filter members & semester for points table
    
   // Function to calculate total points for each row initially and after filters are applied
function calculateTotalPoints() {
    // Get all table rows
    const tableRows = document.querySelectorAll("tbody tr");

    // Loop through each table row
    tableRows.forEach((row) => {
        const eventColumns = row.cells.length;
        let totalPoints = 0;
        // Loop through columns containing points (columns 2 to 5)
        for (let i = 2; i < 6; i++) {
            totalPoints += parseInt(row.cells[i].textContent) || 0; // Parse the text content to integer
        }
        // Display the total points in the last cell of the row
        row.cells[eventColumns - 1].textContent = totalPoints;
    });
}
// Function to get the current semester based on the current date
function getCurrentSemester() {
    const currentDate = new Date();
    const currentMonth = currentDate.getMonth(); // Month is zero-based

    // Determine the semester based on the current month
    let currentSemester;
    if (currentMonth >= 0 && currentMonth <= 5) {
        currentSemester = "Spring " + currentDate.getFullYear();
    } else {
        currentSemester = "Fall " + currentDate.getFullYear();
    }

    return currentSemester;
}

// Set the current semester text when the page loads
window.addEventListener("load", function () {
    document.getElementById("semesterFilter").value = getCurrentSemester();
    document.getElementById("applyFilters").click();

});

// Calculate total points when the page loads
window.addEventListener("load", calculateTotalPoints);

document.getElementById("applyFilters").addEventListener("click", function () {
    // Get the filter values
    const nameSearchValue = document.getElementById("nameSearch").value.trim().toLowerCase();
    const semesterFilterValue = document.getElementById("semesterFilter").value.toLowerCase();

    // Get all table rows
    const tableRows = document.querySelectorAll("tbody tr");

    // Loop through each table row
    tableRows.forEach((row) => {
        // Get the values of the cells in the current row
        const name = row.cells[0].textContent.toLowerCase();
        const semester = row.cells[1].textContent.toLowerCase();

        // Check if the row matches the filters
        const nameMatches = name.includes(nameSearchValue);
        const semesterMatches = semesterFilterValue === "" || semester === semesterFilterValue || semesterFilterValue === "all";

        // If the row matches the filters, display it; otherwise, hide it
        if (nameMatches && semesterMatches) {
            row.style.display = "";
        } else {
            row.style.display = "none";
        }

        // Calculate total points for each row
        let totalPoints = 0;
        for (let i = 2; i < row.cells.length - 1; i++) {
            totalPoints += parseInt(row.cells[i].textContent); // Parse the text content to integer
        }
        // Display the total points in the last cell of the row
        row.cells[row.cells.length - 1].textContent = totalPoints;
    });
});

// EDIT BUTTON
let editbutton = document.getElementById("editbtn");
let savecancelbtn = document.getElementById("savecancelbtn");

// open save and cancel when edit button is clicked
function showsavecancel() {
  savecancelbtn.classList.remove("is-hidden")
  savecancelbtn.classList.add("is-active");
  editbutton.classList.add("is-hidden")
}

editbutton.addEventListener("click", showsavecancel);

// SAVE CANCEL BUTTON
let editsave = document.getElementById("editsave");
let editcancel =document.getElementById("editcancel");

// when the cancel button is clicked it will hide and bring back the edit button
function canceledit() {
  savecancelbtn.classList.add("is-hidden")
  savecancelbtn.classList.remove("is-active");
  editbutton.classList.remove("is-hidden")
}

editcancel.addEventListener("click", canceledit);


        </script>
  </body>
</html>